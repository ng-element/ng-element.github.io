(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{PK75:function(e,t,i){"use strict";i.r(t),i.d(t,"ColorPickerModule",function(){return P});var o=i("3Pt+"),s=i("fXoL"),l=i("XNiG"),n=i("xgIS");const r=["hueSlider"],a=["hueSliderThumb"],c=["svpanel"],h=["svpanelCursor"];let u=(()=>{class e{constructor(){this.hueSliderThumbTop="0px",this.svpanelCursorTop="0px",this.svpanelCursorLeft="0px",this.backgroundColor="hsl(0, 100%, 50%)",this.changeColor$=new l.a,this.selectedColor$=new l.a,this.displayedColor=""}ngOnDestroy(){this.hueSliderUnSubscribe(),this.svpanelUnSubscribe()}ngAfterViewInit(){setTimeout(()=>{this.getThumbTop(),this.getSvpanel()},0)}getThumbTop(){const e=this.color.get("hue");this.hueSliderThumbTop=Math.round(e*(this.hueSlider.nativeElement.offsetHeight-this.hueSliderThumb.nativeElement.offsetHeight/2)/360)+"px"}getSvpanel(){const e=this.color.get("saturation"),t=this.color.get("value"),{clientWidth:i,clientHeight:o}=this.svpanel.nativeElement;this.svpanelCursorLeft=e*i/100+"px",this.svpanelCursorTop=(100-t)*o/100+"px",this.backgroundColor=`hsl(${this.color.get("hue")}, 100%, 50%)`}initHueSlider(){this.hueSliderUnSubscribe();const e=this.hueSlider.nativeElement.getBoundingClientRect();this.hueSliderThumbMove=Object(n.a)(document,"mousemove").subscribe(t=>{var i;t.preventDefault();let o=0,s=0;s=t.clientY<e.top?0:t.clientY>e.top+e.height-2?e.height-2:t.clientY-e.top,o=Math.round((s-this.hueSliderThumb.nativeElement.offsetHeight/2)/(e.height-this.hueSliderThumb.nativeElement.offsetHeight)*360),this.hueSliderThumbTop=s+"px",this.backgroundColor=`hsl(${o}, 100%, 50%)`,this.color.set("hue",o),this.displayedColor=this.color.value,null===(i=this.changeColor$)||void 0===i||i.next(this.color)}),this.hueSliderThumbUp=Object(n.a)(document,"mouseup").subscribe(e=>{this.hueSliderUnSubscribe()})}clickHueSliderBar(e){var t;const i=this.hueSlider.nativeElement.getBoundingClientRect(),o=e.clientY-i.top,s=Math.round((o-this.hueSliderThumb.nativeElement.offsetHeight/2)/(i.height-this.hueSliderThumb.nativeElement.offsetHeight)*360);this.hueSliderThumbTop=o+"px",this.backgroundColor=`hsl(${s}, 100%, 50%)`,this.color.set("hue",s),this.displayedColor=this.color.value,null===(t=this.changeColor$)||void 0===t||t.next(this.color)}hueSliderUnSubscribe(){var e,t;null===(e=this.hueSliderThumbMove)||void 0===e||e.unsubscribe(),null===(t=this.hueSliderThumbUp)||void 0===t||t.unsubscribe()}initSvpanel(){this.svpanelUnSubscribe();const e=this.svpanel.nativeElement.getBoundingClientRect();this.svpanelCursorMove=Object(n.a)(document,"mousemove").subscribe(t=>{t.preventDefault();let i=0,o=0;i=t.clientY<e.top?0:t.clientY>e.top+e.height?e.height:t.clientY-e.top,o=t.clientX<e.left?0:t.clientX>e.left+e.width?e.width:t.clientX-e.left,this.svpanelCursorTop=i+"px",this.svpanelCursorLeft=o+"px",this.changeSvpanel(e,o,i)}),this.hueSliderThumbUp=Object(n.a)(document,"mouseup").subscribe(e=>{this.svpanelUnSubscribe()})}clickSvpanel(e){const t=this.svpanel.nativeElement.getBoundingClientRect(),i=e.clientY-t.top,o=e.clientX-t.left;this.svpanelCursorTop=i+"px",this.svpanelCursorLeft=o+"px",this.changeSvpanel(t,o,i)}svpanelUnSubscribe(){var e,t;null===(e=this.svpanelCursorMove)||void 0===e||e.unsubscribe(),null===(t=this.svpanelCursorUp)||void 0===t||t.unsubscribe()}changeSvpanel(e,t,i){var o;this.color.set({saturation:t/e.width*100,value:100-i/e.height*100}),this.displayedColor=this.color.value,null===(o=this.changeColor$)||void 0===o||o.next(this.color)}confirmValue(){var e;this.displayedColor=this.color.value,null===(e=this.selectedColor$)||void 0===e||e.next(this.color)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Hb({type:e,selectors:[["nel-color-picker-dropdown"]],viewQuery:function(e,t){if(1&e&&(s.Cc(r,1),s.Cc(a,1),s.Cc(c,1),s.Cc(h,1)),2&e){let e;s.oc(e=s.bc())&&(t.hueSlider=e.first),s.oc(e=s.bc())&&(t.hueSliderThumb=e.first),s.oc(e=s.bc())&&(t.svpanel=e.first),s.oc(e=s.bc())&&(t.svpanelCursor=e.first)}},decls:26,vars:9,consts:[["tabindex","-1","aria-hidden","false","data-popper-placement","right",1,"el-popper","is-light","el-color-picker__panel","el-color-dropdown",2,"z-index","2017","margin","0px"],[1,"el-color-dropdown__main-wrapper"],[1,"el-color-hue-slider","is-vertical","hue-slider"],["hueSlider",""],[1,"el-color-hue-slider__bar",3,"click","mousedown"],[1,"el-color-hue-slider__thumb",2,"left","0px",3,"mousedown"],["hueSliderThumb",""],[1,"el-color-svpanel",3,"click","mousedown"],["svpanel",""],[1,"el-color-svpanel__white"],[1,"el-color-svpanel__black"],[1,"el-color-svpanel__cursor",3,"mousedown"],["svpanelCursor",""],[1,"el-color-dropdown__btns"],[1,"el-color-dropdown__value"],[1,"el-input","el-input--small"],[1,"el-input__wrapper"],["type","text","autocomplete","off","tabindex","0","id","el-id-9846-25",1,"el-input__inner",3,"ngModel","ngModelChange"],["aria-disabled","false","type","button",1,"el-button","el-button--small","is-text","el-color-dropdown__link-btn"],[1,""],["aria-disabled","false","type","button",1,"el-button","el-button--small","is-plain","el-color-dropdown__btn",3,"click"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div"),s.Tb(2,"div",1),s.Tb(3,"div",2,3),s.Tb(5,"div",4),s.ac("click",function(e){return t.clickHueSliderBar(e)})("mousedown",function(){return t.initHueSlider()}),s.Sb(),s.Tb(6,"div",5,6),s.ac("mousedown",function(){return t.initHueSlider()}),s.Sb(),s.Sb(),s.Tb(8,"div",7,8),s.ac("click",function(e){return t.clickSvpanel(e)})("mousedown",function(){return t.initSvpanel()}),s.Ob(10,"div",9),s.Ob(11,"div",10),s.Tb(12,"div",11,12),s.ac("mousedown",function(){return t.initSvpanel()}),s.Ob(14,"div"),s.Sb(),s.Sb(),s.Sb(),s.Tb(15,"div",13),s.Tb(16,"span",14),s.Tb(17,"div",15),s.Tb(18,"div",16),s.Tb(19,"input",17),s.ac("ngModelChange",function(e){return t.displayedColor=e}),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(20,"button",18),s.Tb(21,"span",19),s.yc(22,"Clear"),s.Sb(),s.Sb(),s.Tb(23,"button",20),s.ac("click",function(){return t.confirmValue()}),s.Tb(24,"span",19),s.yc(25,"OK"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.zb(6),s.vc("top",t.hueSliderThumbTop),s.zb(2),s.vc("background-color",t.backgroundColor),s.zb(4),s.vc("top",t.svpanelCursorTop)("left",t.svpanelCursorLeft),s.zb(7),s.jc("ngModel",t.displayedColor))},directives:[o.a,o.i,o.k],styles:[".el-color-picker__panel{position:relative!important}"],encapsulation:2}),e})();var p=i("+rOU");const b=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d=function(e,t,i){return[e,t*i/((e=(2-t)*i)<1?e:2-e)||0,e/2]},v=function(e,t){var i;"string"==typeof(i=e)&&i.includes(".")&&1===Number.parseFloat(i)&&(e="100%");const o=function(e){return"string"==typeof e&&e.includes("%")}(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),o&&(e=Number.parseInt(""+e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},m={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},g=function(e){e=Math.min(Math.round(e),255);const t=Math.floor(e/16),i=e%16;return`${m[t]||t}${m[i]||i}`},f=function({r:e,g:t,b:i}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+i)?"":`#${g(e)}${g(t)}${g(i)}`},S={A:10,B:11,C:12,D:13,E:14,F:15},C=function(e){return 2===e.length?16*(S[e[0].toUpperCase()]||+e[0])+(S[e[1].toUpperCase()]||+e[1]):S[e[1].toUpperCase()]||+e[1]},_=function(e,t,i){e=v(e,255),t=v(t,255),i=v(i,255);const o=Math.max(e,t,i),s=Math.min(e,t,i);let l;const n=o,r=o-s,a=0===o?0:r/o;if(o===s)l=0;else{switch(o){case e:l=(t-i)/r+(t<i?6:0);break;case t:l=(i-e)/r+2;break;case i:l=(e-t)/r+4}l/=6}return{h:360*l,s:100*a,v:100*n}},T=function(e,t,i){e=6*v(e,360),t=v(t,100),i=v(i,100);const o=Math.floor(e),s=e-o,l=i*(1-t),n=i*(1-s*t),r=i*(1-(1-s)*t),a=o%6,c=[r,i,i,n,l,l][a],h=[l,l,r,i,i,n][a];return{r:Math.round(255*[i,n,l,l,r,i][a]),g:Math.round(255*c),b:Math.round(255*h)}};class w{constructor(e){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",e=e||{};for(const t in e)b(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=t,this.doOnChange();else for(const i in e)b(e,i)&&this.set(i,e[i])}get(e){return"alpha"===e?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return T(this._hue,this._saturation,this._value)}fromString(e){if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();const t=(e,t,i)=>{this._hue=Math.max(0,Math.min(360,e)),this._saturation=Math.max(0,Math.min(100,t)),this._value=Math.max(0,Math.min(100,i)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(e=>""!==e).map((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10));if(4===i.length?this._alpha=100*Number.parseFloat(i[3]):3===i.length&&(this._alpha=100),i.length>=3){const{h:e,s:o,v:s}=function(e,t,i){i/=100;let o=t/=100;const s=Math.max(i,.01);return t*=(i*=2)<=1?i:2-i,o*=s<=1?s:2-s,{h:e,s:100*(0===i?2*o/(s+o):2*t/(i+t)),v:(i+t)/2*100}}(i[0],i[1],i[2]);t(e,o,s)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(e=>""!==e).map((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10));4===i.length?this._alpha=100*Number.parseFloat(i[3]):3===i.length&&(this._alpha=100),i.length>=3&&t(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(e=>""!==e).map((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10));if(4===i.length?this._alpha=100*Number.parseFloat(i[3]):3===i.length&&(this._alpha=100),i.length>=3){const{h:e,s:o,v:s}=_(i[0],i[1],i[2]);t(e,o,s)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let o,s,l;3===i.length?(o=C(i[0]+i[0]),s=C(i[1]+i[1]),l=C(i[2]+i[2])):6!==i.length&&8!==i.length||(o=C(i.slice(0,2)),s=C(i.slice(2,4)),l=C(i.slice(4,6))),8===i.length?this._alpha=C(i.slice(6))/255*100:3!==i.length&&6!==i.length||(this._alpha=100);const{h:n,s:r,v:a}=_(o,s,l);t(n,r,a)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:i,_alpha:o,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const o=d(e,t/100,i/100);this.value=`hsla(${e}, ${Math.round(100*o[1])}%, ${Math.round(100*o[2])}%, ${this.get("alpha")/100})`;break}case"hsv":this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break;case"hex":this.value=`${f(T(e,t,i))}${g(255*o/100)}`;break;default:{const{r:o,g:s,b:l}=T(e,t,i);this.value=`rgba(${o}, ${s}, ${l}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const o=d(e,t/100,i/100);this.value=`hsl(${e}, ${Math.round(100*o[1])}%, ${Math.round(100*o[2])}%)`;break}case"hsv":this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(i)}%)`;break;case"rgb":{const{r:o,g:s,b:l}=T(e,t,i);this.value=`rgb(${o}, ${s}, ${l})`;break}default:this.value=f(T(e,t,i))}}}var y=i("rDax");let k=(()=>{class e{constructor(e,t,i){this.overlay=e,this.overlayPositionBuilder=t,this.elementRef=i,this.showAlpha=!1,this.colorFormat="",this.isOpen=!1,this.displayedColor="",this.modelValue="",this.change=e=>{}}ngOnDestroy(){this.changeColorSub&&this.changeColorSub.unsubscribe(),this.selectedColorSub&&this.selectedColorSub.unsubscribe(),this.outsideSub&&this.outsideSub.unsubscribe(),this.timeout&&clearTimeout(this.timeout)}open(){var e,t;if(this.isOpen)return;const i=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"}]);if(this.overlayRef=this.overlay.create({positionStrategy:i}),this.overlayRef){const i=this.overlayRef.attach(new p.a(u));i.instance.color=new w({enableAlpha:this.showAlpha,format:this.colorFormat,value:this.modelValue}),this.changeColorSub=null===(e=i.instance.changeColor$)||void 0===e?void 0:e.subscribe(e=>{this.displayedColor=e.value}),this.selectedColorSub=null===(t=i.instance.selectedColor$)||void 0===t?void 0:t.subscribe(e=>{this.displayedColor=e.value,this.modelValue=e.value,this.change(e.value),this.close()}),this.isOpen=!0,this.outsideSub=this.overlayRef.outsidePointerEvents().subscribe(()=>{this.displayedColor=this.modelValue,this.change(this.modelValue),this.close()})}}close(){var e,t,i;this.overlayRef.detach(),null===(e=this.outsideSub)||void 0===e||e.unsubscribe(),null===(t=this.changeColorSub)||void 0===t||t.unsubscribe(),null===(i=this.selectedColorSub)||void 0===i||i.unsubscribe(),this.timeout=setTimeout(()=>{this.isOpen=!1},150)}writeValue(e){this.modelValue=e}registerOnChange(e){this.change=e}registerOnTouched(e){}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(y.b),s.Nb(y.d),s.Nb(s.l))},e.\u0275cmp=s.Hb({type:e,selectors:[["nel-color-picker"]],inputs:{showAlpha:"showAlpha",colorFormat:"colorFormat"},features:[s.yb([{provide:o.g,useExisting:Object(s.T)(()=>e),multi:!0}])],decls:7,vars:2,consts:[["role","button","aria-label","color picker","aria-description","current color is #409EFF. press enter to select a new color.","tabindex","0",1,"el-color-picker","el-tooltip__trigger","el-tooltip__trigger",3,"click"],[1,"el-color-picker__trigger"],[1,"el-color-picker__color"],[1,"el-color-picker__color-inner"],[1,"el-icon","el-color-picker__icon","is-icon-arrow-down"],["viewBox","0 0 1024 1024","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.ac("click",function(){return t.open()}),s.Tb(1,"div",1),s.Tb(2,"span",2),s.Tb(3,"span",3),s.Tb(4,"i",4),s.dc(),s.Tb(5,"svg",5),s.Ob(6,"path",6),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.zb(3),s.vc("background-color",t.displayedColor))},styles:["nel-color-picker[_ngcontent-%COMP%]{display:inline-block}"]}),e})();var M=i("ofXK");let $=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({imports:[[M.c,o.f,y.c]]}),e})();var x=i("aA8y");let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({imports:[[o.f,$,x.a]]}),e})();var O=i("PCNd"),F=i("tyNb"),U=i("QJGT"),E=i("rvuC");let H=(()=>{class e{constructor(){this.color1="#409EFF"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Hb({type:e,selectors:[["nel-demo-color-picker-basic"]],decls:3,vars:2,consts:[[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.Tb(0,"p"),s.yc(1),s.Sb(),s.Tb(2,"nel-color-picker",0),s.ac("ngModelChange",function(e){return t.color1=e}),s.Sb()),2&e&&(s.zb(1),s.zc(t.color1),s.zb(1),s.jc("ngModel",t.color1))},directives:[k,o.i,o.k],encapsulation:2}),e})();const j=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Hb({type:e,selectors:[["app-color-picker"]],decls:9,vars:1,consts:[["code","import { NelColorPickerModule } from 'ng-element-ui/color-picker';"],[3,"codeUrl"],["demo",""]],template:function(e,t){1&e&&(s.Tb(0,"h2"),s.yc(1,"ColorPicker \u989c\u8272\u9009\u62e9\u5668"),s.Sb(),s.Tb(2,"p"),s.yc(3,"\u7528\u4e8e\u989c\u8272\u9009\u62e9\uff0c\u652f\u6301\u591a\u79cd\u683c\u5f0f\u3002"),s.Sb(),s.Ob(4,"app-code",0),s.Tb(5,"h3"),s.yc(6,"\u57fa\u7840\u7528\u6cd5"),s.Sb(),s.Tb(7,"app-demo",1),s.Ob(8,"nel-demo-color-picker-basic",2),s.Sb()),2&e&&(s.zb(7),s.jc("codeUrl","components-color-picker-demo-basic.component"))},directives:[U.a,E.a,H],encapsulation:2}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({imports:[[F.i.forChild(j)],F.i]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({imports:[[N,O.a,A]]}),e})()}}]);