import{a as _}from"./chunk-FFGJMO62.js";import{o as A,q as R,r as w,t as j}from"./chunk-JOIXMEFZ.js";import"./chunk-JYBRZQRP.js";import{Da as o,Ea as n,Fa as h,I as m,Ka as g,Qb as C,U as y,Ua as r,Va as b,W as E,ca as l,da as F,h as I,la as u,ma as a,na as B,r as v,ra as d,rb as D,sb as O,va as s,x as M,za as N,zb as x}from"./chunk-UJIEDWPF.js";var S=(()=>{class e{set nelDisabled(t){this.disabled=t,this.initData&&(t?(this.subscribeScoll&&this.subscribeScoll.unsubscribe(),this.subscribeReachBottom&&this.subscribeReachBottom.unsubscribe()):this.initScroll())}constructor(t){this.elementRef=t,this.reachBottom$=new I,this.disabled=!1,this.initData=!1,this.nelDistance=0,this.nelDelay=200,this.nelImmediate=!0,this.nelOnReachBottom=new y}ngOnDestroy(){this.subscribeScoll&&this.subscribeScoll.unsubscribe(),this.subscribeReachBottom&&this.subscribeReachBottom.unsubscribe()}ngAfterViewInit(){this.container=_(this.elementRef.nativeElement,!0),this.disabled||(this.initScroll(),this.initImmediate()),this.initData=!0}initScroll(){this.subscribeReachBottom=this.reachBottom$.asObservable().pipe(M(this.nelDelay)).subscribe(()=>{this.nelOnReachBottom.emit()}),this.subscribeScoll=v(this.container,"scroll").subscribe(()=>{this.handleScroll()})}initImmediate(){if(this.nelImmediate){this.observer=new MutationObserver(i=>{this.immediate()});let t={childList:!0,subtree:!0};this.observer.observe(this.container,t),this.immediate()}}immediate(){this.container.scrollHeight<=this.container.clientHeight?this.nelOnReachBottom.emit():this.observer&&this.observer.disconnect()}handleScroll(){this.container.scrollHeight-this.container.clientHeight-this.container.scrollTop<=this.nelDistance&&this.reachBottom$.next(!0)}static{this.\u0275fac=function(i){return new(i||e)(F(E))}}static{this.\u0275dir=B({type:e,selectors:[["","nel-infinite-scroll",""]],inputs:{nelDistance:"nelDistance",nelDisabled:"nelDisabled",nelDelay:"nelDelay",nelImmediate:"nelImmediate"},outputs:{nelOnReachBottom:"nelOnReachBottom"},standalone:!1})}}return e})();var P=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=m({})}}return e})();function z(e,p){if(e&1&&(o(0,"li",2),r(1),n()),e&2){let t=p.$implicit;l(),b(t)}}var H=(()=>{class e{constructor(){this.list=[]}add(){for(let t=0;t<2;t++)this.list.push(this.list.length+1)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=u({type:e,selectors:[["nel-demo-infinite-scroll-basic"]],standalone:!1,decls:2,vars:1,consts:[["nel-infinite-scroll","",1,"infinite-list",2,"overflow","auto",3,"nelOnReachBottom"],["class","infinite-list-item",4,"ngFor","ngForOf"],[1,"infinite-list-item"]],template:function(i,c){i&1&&(o(0,"ul",0),g("nelOnReachBottom",function(){return c.add()}),d(1,z,2,1,"li",1),n()),i&2&&(l(),s("ngForOf",c.list))},dependencies:[D,S],styles:[".infinite-list[_ngcontent-%COMP%]{height:300px;padding:0;margin:0;list-style:none}.infinite-list[_ngcontent-%COMP%]   .infinite-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px;background:#e8f3fe;margin:10px;color:#7dbcfc}"]})}}return e})();function J(e,p){if(e&1&&(o(0,"li",4),r(1),n()),e&2){let t=p.$implicit;l(),b(t)}}function K(e,p){e&1&&(o(0,"p"),r(1,"\u52A0\u8F7D\u4E2D..."),n())}function Q(e,p){e&1&&(o(0,"p"),r(1,"\u6CA1\u6709\u66F4\u591A\u4E86"),n())}var U=(()=>{class e{constructor(){this.list=[],this.loading=!1}ngOnInit(){for(let t=1;t<11;t++)this.list.push(t)}disabled(){return this.loading||this.noMore()}noMore(){return this.list.length>=20}load(){this.loading=!0,setTimeout(()=>{for(let t=0;t<2;t++)this.list.push(this.list.length+1);this.loading=!1},2e3)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=u({type:e,selectors:[["nel-demo-infinite-scroll-disabled"]],standalone:!1,decls:5,vars:4,consts:[[1,"infinite-list-wrapper",2,"overflow","auto"],["nel-infinite-scroll","",1,"list",2,"color","blue",3,"nelOnReachBottom","nelDisabled"],["class","list-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-item"]],template:function(i,c){i&1&&(o(0,"div",0)(1,"ul",1),g("nelOnReachBottom",function(){return c.load()}),d(2,J,2,1,"li",2),n(),d(3,K,2,0,"p",3)(4,Q,2,0,"p",3),n()),i&2&&(l(),s("nelDisabled",c.disabled()),l(),s("ngForOf",c.list),l(),s("ngIf",c.loading),l(),s("ngIf",c.noMore()))},dependencies:[D,O,S],styles:[".infinite-list-wrapper[_ngcontent-%COMP%]{height:300px;text-align:center}.infinite-list-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;color:red}.infinite-list-wrapper[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px;background:#fff6f6;color:#ff8484}.infinite-list-wrapper[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%] + .list-item[_ngcontent-%COMP%]{margin-top:10px}"]})}}return e})();var $=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=m({imports:[x,P]})}}return e})();var k=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=u({type:e,selectors:[["app-infinite-scroll"]],hostVars:2,hostBindings:function(i,c){i&2&&N("article")},standalone:!1,decls:16,vars:3,consts:[["code","import { NelInfiniteScrollModule } from 'ng-element-ui/infinite-scroll';"],[3,"codeUrl"],["demo",""],[3,"docUrl"]],template:function(i,c){i&1&&(o(0,"h2"),r(1,"InfiniteScroll \u65E0\u9650\u6EDA\u52A8"),n(),o(2,"p"),r(3,"\u6EDA\u52A8\u81F3\u5E95\u90E8\u65F6\uFF0C\u52A0\u8F7D\u66F4\u591A\u6570\u636E\u3002"),n(),h(4,"app-code",0),o(5,"h3"),r(6,"\u57FA\u7840\u7528\u6CD5"),n(),o(7,"p"),r(8,"\u5728\u8981\u5B9E\u73B0\u6EDA\u52A8\u52A0\u8F7D\u7684\u5217\u8868\u4E0A\u4E0A\u6DFB\u52A0nel-infinite-scroll\uFF0C\u5E76\u8D4B\u503C\u76F8\u5E94\u7684\u52A0\u8F7D\u65B9\u6CD5\uFF0C\u53EF\u5B9E\u73B0\u6EDA\u52A8\u5230\u5E95\u90E8\u65F6\u81EA\u52A8\u6267\u884C\u52A0\u8F7D\u65B9\u6CD5\u3002"),n(),o(9,"app-demo",1),h(10,"nel-demo-infinite-scroll-basic",2),n(),o(11,"h3"),r(12,"\u7981\u7528\u52A0\u8F7D"),n(),o(13,"app-demo",1),h(14,"nel-demo-infinite-scroll-disabled",2),n(),h(15,"app-doc",3)),i&2&&(l(9),s("codeUrl","components-infinite-scroll-demo-basic.component"),l(4),s("codeUrl","components-infinite-scroll-demo-disabled.component"),l(2),s("docUrl","components-infinite-scroll"))},dependencies:[H,U,A,R,w],encapsulation:2})}}return e})();var X=[{path:"",component:k}],V=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=m({imports:[C.forChild(X),C]})}}return e})();var Ae=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=m({imports:[$,j,V]})}}return e})();export{Ae as InfiniteScrollModule};
