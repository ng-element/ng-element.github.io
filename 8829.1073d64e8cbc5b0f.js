"use strict";(self.webpackChunkng_element=self.webpackChunkng_element||[]).push([[8829],{8829:(Z,k,c)=>{c.r(k),c.d(k,{ColorPickerModule:()=>K});var u=c(4341),t=c(4438),_=c(1413),f=c(3726);const N=["hueSlider"],F=["hueSliderThumb"],j=["svpanel"],P=["svpanelCursor"];let B=(()=>{class s{constructor(){this.hueSliderThumbTop="0px",this.svpanelCursorTop="0px",this.svpanelCursorLeft="0px",this.backgroundColor="hsl(0, 100%, 50%)",this.changeColor$=new _.B,this.selectedColor$=new _.B,this.displayedColor=""}ngOnDestroy(){this.hueSliderUnSubscribe(),this.svpanelUnSubscribe()}ngAfterViewInit(){setTimeout(()=>{this.getThumbTop(),this.getSvpanel()},0)}getThumbTop(){const o=this.color.get("hue");this.hueSliderThumbTop=Math.round(o*(this.hueSlider.nativeElement.offsetHeight-this.hueSliderThumb.nativeElement.offsetHeight/2)/360)+"px"}getSvpanel(){const o=this.color.get("saturation"),e=this.color.get("value"),{clientWidth:i,clientHeight:l}=this.svpanel.nativeElement;this.svpanelCursorLeft=o*i/100+"px",this.svpanelCursorTop=(100-e)*l/100+"px",this.backgroundColor=`hsl(${this.color.get("hue")}, 100%, 50%)`}initHueSlider(){this.hueSliderUnSubscribe();const o=this.hueSlider.nativeElement.getBoundingClientRect();this.hueSliderThumbMove=(0,f.R)(document,"mousemove").subscribe(e=>{e.preventDefault();let i=0,l=0;l=e.clientY<o.top?0:e.clientY>o.top+o.height-2?o.height-2:e.clientY-o.top,i=Math.round((l-this.hueSliderThumb.nativeElement.offsetHeight/2)/(o.height-this.hueSliderThumb.nativeElement.offsetHeight)*360),this.hueSliderThumbTop=l+"px",this.backgroundColor=`hsl(${i}, 100%, 50%)`,this.color.set("hue",i),this.displayedColor=this.color.value,this.changeColor$?.next(this.color)}),this.hueSliderThumbUp=(0,f.R)(document,"mouseup").subscribe(e=>{this.hueSliderUnSubscribe()})}clickHueSliderBar(o){const e=this.hueSlider.nativeElement.getBoundingClientRect(),i=o.clientY-e.top,l=Math.round((i-this.hueSliderThumb.nativeElement.offsetHeight/2)/(e.height-this.hueSliderThumb.nativeElement.offsetHeight)*360);this.hueSliderThumbTop=i+"px",this.backgroundColor=`hsl(${l}, 100%, 50%)`,this.color.set("hue",l),this.displayedColor=this.color.value,this.changeColor$?.next(this.color)}hueSliderUnSubscribe(){this.hueSliderThumbMove?.unsubscribe(),this.hueSliderThumbUp?.unsubscribe()}initSvpanel(){this.svpanelUnSubscribe();const o=this.svpanel.nativeElement.getBoundingClientRect();this.svpanelCursorMove=(0,f.R)(document,"mousemove").subscribe(e=>{e.preventDefault();let i=0,l=0;i=e.clientY<o.top?0:e.clientY>o.top+o.height?o.height:e.clientY-o.top,l=e.clientX<o.left?0:e.clientX>o.left+o.width?o.width:e.clientX-o.left,this.svpanelCursorTop=i+"px",this.svpanelCursorLeft=l+"px",this.changeSvpanel(o,l,i)}),this.hueSliderThumbUp=(0,f.R)(document,"mouseup").subscribe(e=>{this.svpanelUnSubscribe()})}clickSvpanel(o){const e=this.svpanel.nativeElement.getBoundingClientRect(),i=o.clientY-e.top,l=o.clientX-e.left;this.svpanelCursorTop=i+"px",this.svpanelCursorLeft=l+"px",this.changeSvpanel(e,l,i)}svpanelUnSubscribe(){this.svpanelCursorMove?.unsubscribe(),this.svpanelCursorUp?.unsubscribe()}changeSvpanel(o,e,i){this.color.set({saturation:e/o.width*100,value:100-i/o.height*100}),this.displayedColor=this.color.value,this.changeColor$?.next(this.color)}confirmValue(){this.displayedColor=this.color.value,this.selectedColor$?.next(this.color)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["nel-color-picker-dropdown"]],viewQuery:function(e,i){if(1&e&&(t.GBs(N,5),t.GBs(F,5),t.GBs(j,5),t.GBs(P,5)),2&e){let l;t.mGM(l=t.lsd())&&(i.hueSlider=l.first),t.mGM(l=t.lsd())&&(i.hueSliderThumb=l.first),t.mGM(l=t.lsd())&&(i.svpanel=l.first),t.mGM(l=t.lsd())&&(i.svpanelCursor=l.first)}},decls:26,vars:9,consts:[["hueSlider",""],["hueSliderThumb",""],["svpanel",""],["svpanelCursor",""],["tabindex","-1","aria-hidden","false","data-popper-placement","right",1,"el-popper","is-light","el-color-picker__panel","el-color-dropdown",2,"z-index","2017","margin","0px"],[1,"el-color-dropdown__main-wrapper"],[1,"el-color-hue-slider","is-vertical","hue-slider"],[1,"el-color-hue-slider__bar",3,"click","mousedown"],[1,"el-color-hue-slider__thumb",2,"left","0px",3,"mousedown"],[1,"el-color-svpanel",3,"click","mousedown"],[1,"el-color-svpanel__white"],[1,"el-color-svpanel__black"],[1,"el-color-svpanel__cursor",3,"mousedown"],[1,"el-color-dropdown__btns"],[1,"el-color-dropdown__value"],[1,"el-input","el-input--small"],[1,"el-input__wrapper"],["type","text","autocomplete","off","tabindex","0","id","el-id-9846-25",1,"el-input__inner",3,"ngModelChange","ngModel"],["aria-disabled","false","type","button",1,"el-button","el-button--small","is-text","el-color-dropdown__link-btn"],[1,""],["aria-disabled","false","type","button",1,"el-button","el-button--small","is-plain","el-color-dropdown__btn",3,"click"]],template:function(e,i){if(1&e){const l=t.RV6();t.j41(0,"div",4)(1,"div")(2,"div",5)(3,"div",6,0)(5,"div",7),t.bIt("click",function(a){return t.eBV(l),t.Njj(i.clickHueSliderBar(a))})("mousedown",function(){return t.eBV(l),t.Njj(i.initHueSlider())}),t.k0s(),t.j41(6,"div",8,1),t.bIt("mousedown",function(){return t.eBV(l),t.Njj(i.initHueSlider())}),t.k0s()(),t.j41(8,"div",9,2),t.bIt("click",function(a){return t.eBV(l),t.Njj(i.clickSvpanel(a))})("mousedown",function(){return t.eBV(l),t.Njj(i.initSvpanel())}),t.nrm(10,"div",10)(11,"div",11),t.j41(12,"div",12,3),t.bIt("mousedown",function(){return t.eBV(l),t.Njj(i.initSvpanel())}),t.nrm(14,"div"),t.k0s()()(),t.j41(15,"div",13)(16,"span",14)(17,"div",15)(18,"div",16)(19,"input",17),t.mxI("ngModelChange",function(a){return t.eBV(l),t.DH7(i.displayedColor,a)||(i.displayedColor=a),t.Njj(a)}),t.k0s()()()(),t.j41(20,"button",18)(21,"span",19),t.EFF(22,"Clear"),t.k0s()(),t.j41(23,"button",20),t.bIt("click",function(){return t.eBV(l),t.Njj(i.confirmValue())}),t.j41(24,"span",19),t.EFF(25,"OK"),t.k0s()()()()()}2&e&&(t.R7$(6),t.xc7("top",i.hueSliderThumbTop),t.R7$(2),t.xc7("background-color",i.backgroundColor),t.R7$(4),t.xc7("top",i.svpanelCursorTop)("left",i.svpanelCursorLeft),t.R7$(7),t.R50("ngModel",i.displayedColor))},dependencies:[u.me,u.BC,u.vS],styles:[".el-color-picker__panel{position:relative!important}\n"],encapsulation:2})}}return s})();var R=c(6939);const S=(s,n)=>Object.prototype.hasOwnProperty.call(s,n),M=function(s,n,o){return[s,n*o/((s=(2-n)*o)<1?s:2-s)||0,s/2]},d=function(s,n){(function(s){return"string"==typeof s&&s.includes(".")&&1===Number.parseFloat(s)})(s)&&(s="100%");const o=function(s){return"string"==typeof s&&s.includes("%")}(s);return s=Math.min(n,Math.max(0,Number.parseFloat(`${s}`))),o&&(s=Number.parseInt(""+s*n,10)/100),Math.abs(s-n)<1e-6?1:s%n/Number.parseFloat(n)},w={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},b=function(s){s=Math.min(Math.round(s),255);const n=Math.floor(s/16),o=s%16;return`${w[n]||n}${w[o]||o}`},y=function({r:s,g:n,b:o}){return Number.isNaN(+s)||Number.isNaN(+n)||Number.isNaN(+o)?"":`#${b(s)}${b(n)}${b(o)}`},C={A:10,B:11,C:12,D:13,E:14,F:15},p=function(s){return 2===s.length?16*(C[s[0].toUpperCase()]||+s[0])+(C[s[1].toUpperCase()]||+s[1]):C[s[1].toUpperCase()]||+s[1]},T=function(s,n,o){s=d(s,255),n=d(n,255),o=d(o,255);const e=Math.max(s,n,o),i=Math.min(s,n,o);let l;const r=e,a=e-i,h=0===e?0:a/e;if(e===i)l=0;else{switch(e){case s:l=(n-o)/a+(n<o?6:0);break;case n:l=(o-s)/a+2;break;case o:l=(s-n)/a+4}l/=6}return{h:360*l,s:100*h,v:100*r}},m=function(s,n,o){s=6*d(s,360),n=d(n,100),o=d(o,100);const e=Math.floor(s),i=s-e,l=o*(1-n),r=o*(1-i*n),a=o*(1-(1-i)*n),h=e%6,Q=[a,o,o,r,l,l][h],W=[l,l,a,o,o,r][h];return{r:Math.round(255*[o,r,l,l,a,o][h]),g:Math.round(255*Q),b:Math.round(255*W)}};class V{constructor(n){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",n=n||{};for(const o in n)S(n,o)&&(this[o]=n[o]);n.value?this.fromString(n.value):this.doOnChange()}set(n,o){if(1!==arguments.length||"object"!=typeof n)this[`_${n}`]=o,this.doOnChange();else for(const e in n)S(n,e)&&this.set(e,n[e])}get(n){return"alpha"===n?Math.floor(this[`_${n}`]):this[`_${n}`]}toRgb(){return m(this._hue,this._saturation,this._value)}fromString(n){if(!n)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();const o=(e,i,l)=>{this._hue=Math.max(0,Math.min(360,e)),this._saturation=Math.max(0,Math.min(100,i)),this._value=Math.max(0,Math.min(100,l)),this.doOnChange()};if(n.includes("hsl")){const e=n.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(i=>""!==i).map((i,l)=>l>2?Number.parseFloat(i):Number.parseInt(i,10));if(4===e.length?this._alpha=100*Number.parseFloat(e[3]):3===e.length&&(this._alpha=100),e.length>=3){const{h:i,s:l,v:r}=function(s,n,o){o/=100;let e=n/=100;const i=Math.max(o,.01);return n*=(o*=2)<=1?o:2-o,e*=i<=1?i:2-i,{h:s,s:100*(0===o?2*e/(i+e):2*n/(o+n)),v:(o+n)/2*100}}(e[0],e[1],e[2]);o(i,l,r)}}else if(n.includes("hsv")){const e=n.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(i=>""!==i).map((i,l)=>l>2?Number.parseFloat(i):Number.parseInt(i,10));4===e.length?this._alpha=100*Number.parseFloat(e[3]):3===e.length&&(this._alpha=100),e.length>=3&&o(e[0],e[1],e[2])}else if(n.includes("rgb")){const e=n.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(i=>""!==i).map((i,l)=>l>2?Number.parseFloat(i):Number.parseInt(i,10));if(4===e.length?this._alpha=100*Number.parseFloat(e[3]):3===e.length&&(this._alpha=100),e.length>=3){const{h:i,s:l,v:r}=T(e[0],e[1],e[2]);o(i,l,r)}}else if(n.includes("#")){const e=n.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(e))return;let i,l,r;3===e.length?(i=p(e[0]+e[0]),l=p(e[1]+e[1]),r=p(e[2]+e[2])):(6===e.length||8===e.length)&&(i=p(e.slice(0,2)),l=p(e.slice(2,4)),r=p(e.slice(4,6))),8===e.length?this._alpha=p(e.slice(6))/255*100:(3===e.length||6===e.length)&&(this._alpha=100);const{h:a,s:h,v}=T(i,l,r);o(a,h,v)}}compare(n){return Math.abs(n._hue-this._hue)<2&&Math.abs(n._saturation-this._saturation)<1&&Math.abs(n._value-this._value)<1&&Math.abs(n._alpha-this._alpha)<1}doOnChange(){const{_hue:n,_saturation:o,_value:e,_alpha:i,format:l}=this;if(this.enableAlpha)switch(l){case"hsl":{const r=M(n,o/100,e/100);this.value=`hsla(${n}, ${Math.round(100*r[1])}%, ${Math.round(100*r[2])}%, ${this.get("alpha")/100})`;break}case"hsv":this.value=`hsva(${n}, ${Math.round(o)}%, ${Math.round(e)}%, ${this.get("alpha")/100})`;break;case"hex":this.value=`${y(m(n,o,e))}${b(255*i/100)}`;break;default:{const{r,g:a,b:h}=m(n,o,e);this.value=`rgba(${r}, ${a}, ${h}, ${this.get("alpha")/100})`}}else switch(l){case"hsl":{const r=M(n,o/100,e/100);this.value=`hsl(${n}, ${Math.round(100*r[1])}%, ${Math.round(100*r[2])}%)`;break}case"hsv":this.value=`hsv(${n}, ${Math.round(o)}%, ${Math.round(e)}%)`;break;case"rgb":{const{r,g:a,b:h}=m(n,o,e);this.value=`rgb(${r}, ${a}, ${h})`;break}default:this.value=y(m(n,o,e))}}}var g=c(6969);let O=(()=>{class s{constructor(o,e,i){this.overlay=o,this.overlayPositionBuilder=e,this.elementRef=i,this.showAlpha=!1,this.colorFormat="",this.isOpen=!1,this.displayedColor="",this.modelValue="",this.change=l=>{}}ngOnDestroy(){this.changeColorSub&&this.changeColorSub.unsubscribe(),this.selectedColorSub&&this.selectedColorSub.unsubscribe(),this.outsideSub&&this.outsideSub.unsubscribe(),this.timeout&&clearTimeout(this.timeout)}open(){if(this.isOpen)return;const i=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"}]);if(this.overlayRef=this.overlay.create({positionStrategy:i}),this.overlayRef){const l=this.overlayRef.attach(new R.A8(B));l.instance.color=new V({enableAlpha:this.showAlpha,format:this.colorFormat,value:this.modelValue}),this.changeColorSub=l.instance.changeColor$?.subscribe(r=>{this.displayedColor=r.value}),this.selectedColorSub=l.instance.selectedColor$?.subscribe(r=>{this.displayedColor=r.value,this.modelValue=r.value,this.change(r.value),this.close()}),this.isOpen=!0,this.outsideSub=this.overlayRef.outsidePointerEvents().subscribe(()=>{this.displayedColor=this.modelValue,this.change(this.modelValue),this.close()})}}close(){this.overlayRef.detach(),this.outsideSub?.unsubscribe(),this.changeColorSub?.unsubscribe(),this.selectedColorSub?.unsubscribe(),this.timeout=setTimeout(()=>{this.isOpen=!1},150)}writeValue(o){this.modelValue=o}registerOnChange(o){this.change=o}registerOnTouched(o){}static{this.\u0275fac=function(e){return new(e||s)(t.rXU(g.hJ),t.rXU(g.lF),t.rXU(t.aKT))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["nel-color-picker"]],inputs:{showAlpha:"showAlpha",colorFormat:"colorFormat"},features:[t.Jv_([{provide:u.kq,useExisting:(0,t.Rfq)(()=>s),multi:!0}])],decls:7,vars:2,consts:[["role","button","aria-label","color picker","aria-description","current color is #409EFF. press enter to select a new color.","tabindex","0",1,"el-color-picker","el-tooltip__trigger","el-tooltip__trigger",3,"click"],[1,"el-color-picker__trigger"],[1,"el-color-picker__color"],[1,"el-color-picker__color-inner"],[1,"el-icon","el-color-picker__icon","is-icon-arrow-down"],["viewBox","0 0 1024 1024","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"]],template:function(e,i){1&e&&(t.j41(0,"div",0),t.bIt("click",function(){return i.open()}),t.j41(1,"div",1)(2,"span",2)(3,"span",3)(4,"i",4),t.qSk(),t.j41(5,"svg",5),t.nrm(6,"path",6),t.k0s()()()()()()),2&e&&(t.R7$(3),t.xc7("background-color",i.displayedColor))},styles:["nel-color-picker[_ngcontent-%COMP%]{display:inline-block}"]})}}return s})();var H=c(177);let A=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[H.MD,u.YN,g.z_]})}}return s})();var x=c(7691);let I=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[u.YN,A,x.N]})}}return s})();var Y=c(3887),$=c(1739);let G=(()=>{class s{constructor(){this.color1="#409EFF"}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["nel-demo-color-picker-basic"]],decls:3,vars:2,consts:[[3,"ngModelChange","ngModel"]],template:function(e,i){1&e&&(t.j41(0,"p"),t.EFF(1),t.k0s(),t.j41(2,"nel-color-picker",0),t.mxI("ngModelChange",function(r){return t.DH7(i.color1,r)||(i.color1=r),r}),t.k0s()),2&e&&(t.R7$(),t.JRh(i.color1),t.R7$(),t.R50("ngModel",i.color1))},dependencies:[u.BC,u.vS,O],encapsulation:2})}}return s})();var X=c(9521),L=c(4356);const J=[{path:"",component:(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-color-picker"]],decls:9,vars:1,consts:[["code","import { NelColorPickerModule } from 'ng-element-ui/color-picker';"],[3,"codeUrl"],["demo",""]],template:function(e,i){1&e&&(t.j41(0,"h2"),t.EFF(1,"ColorPicker \u989c\u8272\u9009\u62e9\u5668"),t.k0s(),t.j41(2,"p"),t.EFF(3,"\u7528\u4e8e\u989c\u8272\u9009\u62e9\uff0c\u652f\u6301\u591a\u79cd\u683c\u5f0f\u3002"),t.k0s(),t.nrm(4,"app-code",0),t.j41(5,"h3"),t.EFF(6,"\u57fa\u7840\u7528\u6cd5"),t.k0s(),t.j41(7,"app-demo",1),t.nrm(8,"nel-demo-color-picker-basic",2),t.k0s()),2&e&&(t.R7$(7),t.Y8G("codeUrl","components-color-picker-demo-basic.component"))},dependencies:[G,X.J,L.D],encapsulation:2})}}return s})()}];let z=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[$.iI.forChild(J),$.iI]})}}return s})(),K=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[I,Y.G,z]})}}return s})()}}]);